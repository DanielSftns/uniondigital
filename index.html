<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/styles.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css" integrity="sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/intlTelInput.min.css">
    <title>UnionDigital</title>
</head>

<body>
    <style>
        .iti__flag {
            background-image: url("./img/flags.png");
        }
        
        @media (-webkit-min-device-pixel-ratio: 2),
        (min-resolution: 192dpi) {
            .iti__flag {
                background-image: url("./img/flags@2x.png");
            }
        }
    </style>

    <div class="loader active">
        <div class="icon loading">
            <div class="ud">
                <svg id="UDGROUP" data-name="UD GROUP" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 82.8 50.35">
                <defs>
                    <style>
                        .loader.active .icon .cls-1{
                            fill: #f75c03;
                            stroke-width: 0;
                            stroke-dashoffset: 0;
                            animation: none;
                        }

                        .loader.active .icon.loading .cls-1{
                            fill: transparent;
                            stroke: #f75c03;
                            stroke-width: .35px;
                            stroke-dasharray: 700;
                            stroke-dashoffset: 0;
                            animation: loading 5s cubic-bezier(.61,.33,.14,.72) infinite;
                            animation-direction: alternate;
                        }

                        @keyframes loading {
                            0%{
                                stroke-dashoffset: 700;
                                  fill: transparent;
                            }
                            80%{
                                fill: transparent;
                                stroke-width: .35px;
                            }
                            100%{
                                stroke-dashoffset: 0;
                                  fill: #f75c03;
                                  stroke-width: 0;
                            }
                        }
                    </style>
                </defs>
                <g id="UD">
                    <path class="cls-1" d="M83.81,31.45a24.77,24.77,0,0,0-9-5,38.52,38.52,0,0,0-11.62-1.62H43.66a3.76,3.76,0,0,0-4,3.94V51.68a5.44,5.44,0,0,1-1.35,4,5.18,5.18,0,0,1-3.88,1.36c-2.52,0-3.49-1-3.81-1.34a5.59,5.59,0,0,1-1.31-4V28.77a3.79,3.79,0,0,0-4.14-3.94H12.7a4.31,4.31,0,0,0-2.92,1A3.8,3.8,0,0,0,8.6,28.77V51c0,7.82,2.26,13.87,6.71,18a21.68,21.68,0,0,0,8.24,4.65,36.11,36.11,0,0,0,10.89,1.5h1.48a29.66,29.66,0,0,0,8.42-1.64A27.52,27.52,0,0,0,53,68.71,24.7,24.7,0,0,0,58.41,62l.15-.35h0l0,0v0h4.51a11.34,11.34,0,0,0,8.4-3.24A11.53,11.53,0,0,0,74.73,50a11.53,11.53,0,0,0-3.2-8.42,11.34,11.34,0,0,0-8.4-3.24h-6.8V51c0,6.73-1.76,11.66-5.4,15s-9.17,5.1-16.48,5.1S21.68,69.46,18,66.08,12.6,57.77,12.6,51V28.83H25.31V51.68a9.46,9.46,0,0,0,2.43,6.82,8.88,8.88,0,0,0,6.69,2.56,9.06,9.06,0,0,0,6.73-2.54,9.34,9.34,0,0,0,2.5-6.84V28.83H63.19c7.71,0,13.76,1.89,18,5.62S87.4,43.26,87.4,50s-2,11.83-6.24,15.55-10.26,5.62-18,5.62H55.1a15.4,15.4,0,0,1-1.66,1.92,16.67,16.67,0,0,1-2.6,2.08H63.19a38.52,38.52,0,0,0,11.62-1.62,24.77,24.77,0,0,0,9-5c5-4.46,7.59-10.7,7.59-18.55S88.85,35.91,83.81,31.45ZM60.7,42.34h2.43a7.42,7.42,0,0,1,5.56,2,7.59,7.59,0,0,1,2,5.61,7.59,7.59,0,0,1-2,5.61,7.42,7.42,0,0,1-5.56,2H60.7Z" transform="translate(-8.6 -24.83)"/>
                </g>
            </svg>
            </div>
            <div class="letras">
                <img src="./img/UnionDigitalLetras.svg">
            </div>
        </div>
    </div>

    <div class="vista_formulario">
        <form class="formulario" action="">
            <button type="button" class="close"></button>
            <div>
                <input id="paquete_selecionado" type="text" hidden>
                <h4 class="title">Dejanos tus datos y nos encargaremos de contactarte</h4>
                <div class="row">
                    <label for="name">NOMBRE</label>
                    <div class="">
                        <input type="text" id="name" name="name" placeholder="Ejemplo">
                    </div>
                </div>
                <div class="row">
                    <label for="tel">NUMERO TELEFONICO</label>
                    <div class="">
                        <input id="phone" name="tel" type="tel">
                    </div>
                </div>
                <div class="row">
                    <label for="email">CORREO ELECTRONICO</label>
                    <div class="">
                        <input type="email" id="email" name="correo" placeholder="ejemplo@ejemplo.com">
                    </div>
                </div>

                <button class="call-to-action" type="submit">ENVIAR</button>
            </div>

            <div class="messaje_pos_send">
                <p>Excelente, en breve nos comunicaremos contigo.</p>
                <img class="check" src="./img/check.svg">
            </div>
        </form>
    </div>

    <header>
        <nav>
            <img src="./img/logo.svg" alt="UnionDigital">

            <button class="menu-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="53.512" height="35.675" viewBox="0 0 53.512 35.675">
                    <defs>
                      <style>
                            .menu-icon svg{
                                overflow: visible;
                            }

                            .menu-icon .bar{
                                fill: #fff;
                                transform-origin: center;
                                transition: all 0.5s ease;
                            }

                            .menu-icon.active .bar2{
                                opacity: 0;
                            }

                            .menu-icon.active .bar1{
                                transform: translate(-10px, 10px) rotate(45deg);
                            }
                            .menu-icon.active .bar3{
                                transform: translate(-10px, -10px) rotate(-45deg);
                            }
                      </style>
                    </defs>
                    <rect class="bar bar1" x="0" y="0" rx="3" width="53.512" height="6"></rect>
                    <rect class="bar bar2" x="0" y="14.7" rx="3" width="53.512" height="6"></rect>
                    <rect class="bar bar3" x="0" y="29.5" rx="3" width="53.512" height="6"></rect>
                </svg>
            </button>
        </nav>
        <h5 class="indicador active">
            <span>Servicios | Branding</span>
            <span>Portafolio</span>
            <span>Nosotros</span>
            <span>Nosotros | Equipo</span>
        </h5>
    </header>

    <main class="container">
        <ul class="menu">
            <li>
                <button class="link" data-href="#servicios">Servicios</button>
            </li>
            <li>
                <button class="link" data-href="#portafolio">Portafolio</button>
            </li>
            <li>
                <button class="link" data-href="#nosotros">Nosotros</button>
            </li>
            <li>
                <button class="link" data-href="#team">Equipo</button>
            </li>
        </ul>

        <div class="hero" data-indicador="0">
            <p class="copy">Somos un equipo destinado a usar la tecnología para prestar un servicio de calidad en el area digital.</p>
            <img src="./img/team.svg" alt="team UnionDigital">
        </div>

        <section class="servicios" id="servicios" data-indicador="0">

            <div class="card paquete">
                <img src="./img/2.png" alt="logo" class="portada">
                <div class="info">
                    <h2 class="title">Logo <span class="price">$30</span></h2>
                    <p class="sub-title">En el formato que necesites</p>
                    <div class="detalles">
                        <p>Logotipo estilo minimalista con variantes, entregaremos el logo en el formato que requieras. Al seleccionar este paquete nos pondremos en contacto contigo.</p>
                        <button class="call-to-action">Seleccionar</button>
                    </div>
                </div>
            </div>

            <div class="card paquete">
                <img src="./img/1.png" alt="logo + guia de marca" class="portada">
                <div class="info">
                    <h2 class="title">Logo + guia de marca <span class="price">$50</span></h2>
                    <p class="sub-title">pequeña guia que se amolda a tus necesidades</p>
                    <div class="detalles">
                        <p>Al seleccionar este paquete nos pondremos en contacto contigo.</p>
                        <button class="call-to-action">Seleccionar</button>
                    </div>
                </div>
            </div>

            <div class="card paquete">
                <img src="./img/1.png" alt="logo + guia de marca" class="portada">
                <div class="info">
                    <h2 class="title">Logo + guia de marca <span class="price">$50</span></h2>
                    <p class="sub-title">pequeña guia que se amolda a tus necesidades</p>
                    <div class="detalles">
                        <p>Al seleccionar este paquete nos pondremos en contacto contigo.</p>
                        <button class="call-to-action">Seleccionar</button>
                    </div>
                </div>
            </div>

        </section>

        <section class="portafolio" id="portafolio" data-indicador="1">

            <div class="card">
                <div class="portada">
                    <img src="./img/2.png" alt="David Marabay">
                </div>
                <div class="info">
                    <h2 class="title">David Marabay</h2>
                    <p class="sub-title">Branding</p>
                </div>
            </div>

            <div class="card">
                <div class="portada animation">
                    <img src="./img/farias_fundacion.png" alt="farias fundación">
                </div>
                <div class="info">
                    <h2 class="title">Farias Fundación</h2>
                    <p class="sub-title">Pagina web</p>
                </div>
            </div>

            <div class="card">
                <div class="portada animation">
                    <img src="./img/soymilaortiz.png" alt="SoyMilaOrtyz">
                </div>
                <div class="info">
                    <h2 class="title">SoyMilaOrtyz</h2>
                    <p class="sub-title">Pagina web</p>
                </div>
            </div>

            <div class="card">
                <div class="portada animation">
                    <img src="./img/infobreakingbad.png" alt="infoBreakingBad">
                </div>
                <div class="info">
                    <h2 class="title">info Breaking Bad</h2>
                    <p class="sub-title">Pagina web</p>
                </div>
            </div>

        </section>

        <section class="nosotros" id="nosotros" data-indicador="2">
            <div>
                <p>Emprendimiento que formamos mediados del año 2019, 4 jóvenes Venezolanos estudiantes de ingeniería de sistemas en la Universidad de oriente.</p>
                <img src="./img/top-view-photo-of-people-having-a-meeting-3183165.png" alt="nosotros">
                <p>Prestamos servicios en el ámbito digital, así mismo creamos proyectos tecnológicos</p>
            </div>
        </section>

        <section class="team" id="team" data-indicador="3">
            <div class="miembro">
                <div class="header">
                    <img class="avatar" src="./img/Ricardo.svg" alt="Ricardo Bellorin">
                    <div class="info">
                        <h2 class="name">Ricardo Bellorin</h2>
                        <h3 class="skills">Diseñador Grafico</h3>

                        <div class="contact">
                            <a target="_blank" class="icon icon-behance" href="#"></a>
                            <a target="_blank" class="icon icon-instagram" href="#"></a>
                        </div>
                    </div>
                </div>
                <p class="quote">Cuando trabajas lo que te gusta, ¿Qué podría salir mal? Comunicativo, responsable y atento... Se ve bien, pero... ¿Funciona?</p>
            </div>

            <div class="miembro">
                <div class="header">
                    <img class="avatar" src="./img/Daniel.svg" alt="Daniel Sifontes">
                    <div class="info">
                        <h2 class="name">Daniel Sifontes</h2>
                        <h3 class="skills">Frontend Developer</h3>

                        <div class="contact">
                            <a target="_blank" class="icon icon-fiverr" href="#"></a>
                            <a target="_blank" class="icon icon-github" href="#"></a>
                            <a target="_blank" class="icon icon-instagram" href="#"></a>
                        </div>
                    </div>
                </div>
                <p class="quote">Hagamos tu idea de negocio realidad! Personalmente comprometido con lo que hago y me apasiona :)</p>
            </div>

            <div class="miembro">
                <div class="header">
                    <img class="avatar" src="./img/Jesus.svg" alt="Jesus Robles">
                    <div class="info">
                        <h2 class="name">Jesus Robles</h2>
                        <h3 class="skills">Diseñador Grafico</h3>

                        <div class="contact">
                            <a target="_blank" class="icon icon-behance" href="#"></a>
                            <a target="_blank" class="icon icon-instagram" href="#"></a>
                        </div>
                    </div>
                </div>
                <p class="quote">Lorem ipsum dolor sit, amet consectetur adipisicing elit. Distinctio explicabo omnis non! Aspernatur animi id dolores qui</p>
            </div>

            <div class="miembro">
                <div class="header">
                    <img class="avatar" src="./img/David.svg" alt="David Marabay">
                    <div class="info">
                        <h2 class="name">David Marabay</h2>
                        <h3 class="skills">Backend Developer</h3>

                        <div class="contact">
                            <a target="_blank" class="icon icon-github" href="#"></a>
                            <a target="_blank" class="icon icon-instagram" href="#"></a>
                        </div>
                    </div>
                </div>
                <p class="quote">Lorem ipsum dolor sit, amet consectetur adipisicing elit. Distinctio explicabo omnis non! Aspernatur animi id dolores qui</p>
            </div>
        </section>

        <button class="chat-icon"></button>
    </main>

    <script src="./js/intlTelInput.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/ScrollToPlugin.min.js"></script>

    <script>
        const menuIcon = document.querySelector('.menu-icon')
        const menu = document.querySelector('.menu')
        const indicador = document.querySelector('.indicador')
        const paquetes = document.querySelectorAll('.paquete')
        const buttonsPaquetes = document.querySelectorAll('.paquete button')
        const vistaFormulario = document.querySelector('.vista_formulario')
        const buttonCerrarFormulario = vistaFormulario.querySelector('.close')
        const buttonSubmitFormulario = vistaFormulario.querySelector('.call-to-action')
        const portadasPortafolioCards = document.querySelectorAll('.portada.animation')

        setTimeout(()=>{
			if(document.readyState == 'complete'){
				finalizarLoading();
			}else{
				const interval = setInterval(()=>{
					if(document.readyState == 'complete'){
						finalizarLoading();
						clearInterval(interval);
					}
				},10000);
			}
		},5000);

		function finalizarLoading(){
			document.querySelector('.icon').classList.remove('loading');
			setTimeout(()=>{
				document.querySelector('.loader').classList.remove('active');
			},4000)
		}
        
        window.addEventListener('load', () => {
            // SETEAR ESTYLOS Y CONFIGUARION
            const headerHeight = document.querySelector('header').offsetHeight
            document.querySelector('.hero').style.height = `calc(100vh - ${headerHeight}px)`
            document.querySelector('.team').style.height = `calc(100vh - ${headerHeight}px)`
            document.querySelector('.menu').style.top = `${headerHeight}px`

            portadasPortafolioCards.forEach(portada => {
                portada.style.height = portada.offsetHeight / 2 + 'px'
            })

            const inputTlf = document.querySelector("#phone")
            const iti = window.intlTelInput(inputTlf, {
                preferredCountries: ["ve", "us"],
                initialCountry: "VE",
                geoIpLookup: function(success, failure) {
                    fetch('https://ipapi.co/json/')
                        .then(function(response) {
                            response.json().then(jsonData => {
                                success(jsonData.country_code)
                            });
                        })
                        .catch(function(error) {
                            console.log(error)
                        });
                },
                utilsScript: './js/utils.js'
            });

            // EVENTOS CLICK
            menuIcon.addEventListener('click', () => {
                menuIcon.classList.toggle('active')
                menu.classList.toggle('active')
                indicador.classList.toggle('active')
            })
            menu.querySelectorAll('button').forEach(link => {
                link.addEventListener('click', (e) => {
                    const direction = e.currentTarget.dataset.href
                    const distance = document.querySelector(`${direction}`).getClientRects()[0].top - headerHeight
                    menuIcon.click()
                    gsap.to(window, {
                        duration: 2,
                        scrollTo: window.scrollY + distance,
                        ease: Cubic.linear
                    })
                })
            })

            paquetes.forEach(paquete => {
                const detalles = paquete.querySelector('.detalles')
                const detallesHeight = detalles.offsetHeight
                detalles.style.height = `${detallesHeight}px`
                detalles.classList.add('hidden')

                paquete.addEventListener('click', () => {
                    detalles.classList.toggle('hidden')
                })
            })

            buttonsPaquetes.forEach(buttonPaquete => {
                buttonPaquete.addEventListener('click', () => {
                    vistaFormulario.querySelector('#paquete_selecionado').value = buttonPaquete.parentNode.parentNode.querySelector('.title').textContent
                    vistaFormulario.classList.add('active')
                })
            })
            buttonCerrarFormulario.addEventListener('click', () => {
                vistaFormulario.classList.remove('active')
            })

            buttonSubmitFormulario.addEventListener('click', (e) => {
                e.preventDefault()
                const name = vistaFormulario.querySelector('#name')
                const email = vistaFormulario.querySelector('#email')
                const paqueteSelecionado = vistaFormulario.querySelector('#paquete_selecionado').value

                name.parentNode.classList.remove('error')
                inputTlf.parentNode.classList.remove('error')
                email.parentNode.classList.remove('error')

                if (name.value == '') {
                    name.parentNode.classList.add('error')
                    return
                }

                if (email.value == '' && inputTlf.value == '') {
                    vistaFormulario.querySelector('.formulario').classList.add('error')
                    return
                } else {
                    if (!iti.isValidNumber() && inputTlf.value != '') {
                        inputTlf.parentNode.parentNode.classList.add('error')
                        return
                    }

                    const regexEmail = /[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+/
                    if (!regexEmail.test(email.value) && email.value != '') {
                        email.parentNode.classList.add('error')
                        return
                    }
                }



                // ENVIAR DATA A API
                const data = {
                    paquete: paqueteSelecionado,
                    nombre: name.value.trim(),
                    telefono: inputTlf.value.trim(),
                    correo: email.value.trim()
                }

                console.log(data)

                document.querySelector('.messaje_pos_send').classList.add('active')

                setTimeout(() => {
                    buttonCerrarFormulario.click()
                    document.querySelector('.messaje_pos_send').classList.remove('active')
                    inputTlf.value = ''
                    name.value = ''
                    email.value = ''
                }, 5000)
            })


            // INDICADOR

            function setIndicador(entries, observer) {
                if (entries[0].isIntersecting && entries.length == 1) {
                    const index = parseInt(entries[0].target.dataset.indicador)
                    indicador.querySelectorAll('span').forEach((span, i) => {
                        if (i < index) {
                            span.style.transform = 'translateY(-200%)'
                        } else if (i > index) {
                            span.style.transform = 'translateY(0%)'
                        } else {
                            span.style.transform = 'translateY(-100%)'
                        }
                    })
                } else {
                    if (entries[0].target.dataset.indicador == '0' && entries[0].boundingClientRect.top > 0) {
                        indicador.querySelectorAll('span')[0].style.transform = 'translateY(0%)'
                    }
                }
            }

            const observer = new IntersectionObserver(setIndicador, {
                threshold: 0.5
            })

            document.querySelectorAll('section').forEach(section => {
                observer.observe(section)
            })

            // SLIDER MIEMBROS

            const miembros = document.querySelectorAll('.miembro')
            const timelineMiembros = gsap.timeline({
                scrollTrigger: {
                    trigger: ".team",
                    pin: true,
                    start: `top ${headerHeight}px`,
                    scrub: 0,
                    snap: {
                        snapTo: 0.33,
                        duration: 0.1
                    }
                }
            });

            for (let i = 0; i < miembros.length - 1; i++) {
                timelineMiembros.to(miembros[i], 0.25, {
                    xPercent: -100,
                    delay: 0.25
                }, "-=0")
                timelineMiembros.from(miembros[i + 1], 0.25, {
                    xPercent: 100
                }, "-=0.25")
            }

            // PORTADASPortafolioCards
            portadasPortafolioCards.forEach(portada => {
                gsap.timeline({
                    scrollTrigger: {
                        trigger: portada,
                        pin: false,
                        start: "center center",
                        scrub: 0
                    }
                }).to(portada.querySelector('img'), 1, {
                    yPercent: -50
                }, "+=0")
            })




            // LIBRERIA TELEFONO
            const resetInputTlf = () => {
                inputTlf.parentNode.parentNode.classList.remove('error')
            }

            inputTlf.addEventListener('blur', () => {
                resetInputTlf()
                if (inputTlf.value.trim()) {
                    if (!iti.isValidNumber()) {
                        inputTlf.parentNode.parentNode.classList.add('error')
                    }
                }
            });

            inputTlf.addEventListener('change', resetInputTlf);
            inputTlf.addEventListener('keyup', resetInputTlf);
        })
    </script>
</body>

</html>